{% extends 'content/base.html' %}

{% block title %}Lessons{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: auto; display: flex; gap: 2rem;">
    <!-- Sidebar Navigation -->
    <nav style="flex: 0 0 200px; background-color: #f4f4f4; padding: 1rem; border-radius: 8px;">
        <h3>Topics</h3>
        <ul style="list-style: none; padding: 0;">
            <li><a href="{% url 'lesson-list' %}" style="color: #2c3e50;">All Topics</a></li>
            {% for topic in topics %}
                <li>
                    <a href="{% url 'lesson-list' %}?q={{ topic }}" style="color: #2c3e50;">{{ topic }}</a>
                </li>
            {% endfor %}
        </ul>
    </nav>

    <!-- Main Content -->
    <div style="flex: 1;">
        <h2 style="margin-bottom: 1.5rem;">Available Lessons</h2>

        <!-- 🔍 Search/Filter Form -->
        <form method="get" style="margin-bottom: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
            <input type="text" name="q" placeholder="Search by topic..." value="{{ request.GET.q }}"
                   style="flex: 1; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;">
            
            <select name="difficulty" style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;">
                <option value="">All Levels</option>
                <option value="Beginner" {% if request.GET.difficulty == "Beginner" %}selected{% endif %}>Beginner</option>
                <option value="Intermediate" {% if request.GET.difficulty == "Intermediate" %}selected{% endif %}>Intermediate</option>
                <option value="Advanced" {% if request.GET.difficulty == "Advanced" %}selected{% endif %}>Advanced</option>
            </select>
    
            <button type="submit"
                    style="padding: 0.5rem 1rem; background-color: #2c3e50; color: white; border: none; border-radius: 5px;">
                Filter
            </button>
        </form>

        {% if lessons %}
            <ul style="list-style: none; padding: 0;">
                {% for lesson in lessons %}
                    <li style="margin-bottom: 1.5rem; background-color: #fff; padding: 1rem 1.5rem; border-radius: 8px;
                               box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);">
                        <h3 style="margin-bottom: 0.5rem;">
                            <a href="{% url 'lesson-detail' lesson.id %}"
                               style="color: #2c3e50; text-decoration: none;">
                                {{ lesson.title }}
                            </a>
                        </h3>
                        <p style="margin: 0.3rem 0;"><strong>Topic:</strong> {{ lesson.topic }}</p>
                        <p style="margin: 0.3rem 0;">
                            <strong>Difficulty:</strong>
                            {% if lesson.difficulty_level == "Beginner" %}
                                <span style="color: green;">🟢 Beginner</span>
                            {% elif lesson.difficulty_level == "Intermediate" %}
                                <span style="color: orange;">🟠 Intermediate</span>
                            {% elif lesson.difficulty_level == "Advanced" %}
                                <span style="color: red;">🔴 Advanced</span>
                            {% else %}
                                {{ lesson.difficulty_level }}
                            {% endif %}
                        </p>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No lessons found for your filter criteria.</p>
        {% endif %}
    </div>
</div>
<style>
    /* Sidebar Navigation */
nav {
    background-color: #f4f4f4;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

nav h3 {
    margin-bottom: 1rem;
    font-size: 1.2rem;
    font-weight: bold;
}

nav ul {
    list-style: none;
    padding: 0;
}

nav ul li {
    margin-bottom: 0.5rem;
}

nav ul li a {
    color: #2c3e50;
    text-decoration: none;
    font-size: 1rem;
}

nav ul li a:hover {
    text-decoration: underline;
}

</style>
{% endblock %}
