{% extends 'content/base.html' %}

{% block content %}
<style>
    .homepage {
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }

    .hero {
        text-align: center;
        padding: 2rem;
        background: linear-gradient(to right, #2c3e50, #34495e);
        color: white;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
    }

    .hero::after {
        content: '';
        background: url('https://images.unsplash.com/photo-1581090700227-1e8e24bfb5c1?auto=format&fit=crop&w=1350&q=80') no-repeat center center;
        background-size: cover;
        opacity: 0.2;
        top: 0; left: 0; right: 0; bottom: 0;
        position: absolute;
        z-index: 0;
    }

    .hero h1, .hero p {
        position: relative;
        z-index: 1;
    }

    .featured, .progress, .recent-activity, .features {
        background: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .featured h2,
    .progress h2,
    .recent-activity h2,
    .features h2 {
        margin-bottom: 1rem;
        color: #2c3e50;
    }

    .cards {
        display: flex;
        gap: 1.5rem;
        flex-wrap: wrap;
    }

    .card {
        background-color: #f7f9fc;
        border: 1px solid #dfe6ed;
        border-radius: 8px;
        padding: 1.5rem;
        flex: 1;
        min-width: 250px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .card img {
        max-width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 1rem;
    }

    .card h3 {
        margin-top: 0;
    }

    .card a {
        display: inline-block;
        margin-top: 0.75rem;
        color: #2980b9;
        text-decoration: none;
        font-weight: 500;
    }

    .card a:hover {
        text-decoration: underline;
    }

    .progress-bar {
        width: 100%;
        background-color: #ecf0f1;
        border-radius: 5px;
        overflow: hidden;
        height: 20px;
        margin: 1rem 0;
    }

    .progress-bar .progress {
        height: 100%;
        background-color: #27ae60;
        transition: width 0.5s ease-in-out;
    }

    .recent-activity ul {
        list-style: none;
        padding: 0;
    }

    .recent-activity li {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #eee;
    }

    .recent-activity a {
        color: #2980b9;
        text-decoration: none;
    }

    .recent-activity a:hover {
        text-decoration: underline;
    }

    .recent-activity span {
        color: #999;
        font-size: 0.9rem;
    }
</style>

<div class="homepage">

    <!-- Hero Section -->
    <section class="hero">
        <h1>Welcome to Personalized Learning</h1>
        <p>Explore lessons tailored to your learning pace and interests.</p>
    </section>

    <!-- Featured Lessons -->
    <section class="featured">
        <h2>Recommended for You</h2>
        <div class="cards">
            {% for lesson in recommended_lessons %}
            <div class="card">
                <img src="https://images.unsplash.com/photo-1715347783170-87337f31ef19?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fHN0dWRlbnRzJTIwcmVhZGluZ3xlbnwwfHwwfHx8MA%3D%3D" alt="{{ lesson.title }}">
                <h3>{{ lesson.title }}</h3>
                <p>{{ lesson.description }}</p>
                <a href="{% url 'lesson-detail' lesson.id %}">Start Now</a>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Progress Overview -->
    <section class="progress">
        <h2>Your Learning Progress</h2>
        <div class="progress-bar">
            <div class="progress" style="width: {{ user_progress }}%;"></div>
        </div>
        <p>10{{ user_progress }}% completed</p>
    </section>

    <!-- Recent Activity -->
    <section class="recent-activity">
        <h2>Recent Activity</h2>
        <ul>
            {% for activity in recent_activity %}
            <li>
                <a href="{{ activity.link }}">{{ activity.description }}</a>
                <span>{{ activity.timestamp|date:"M d, Y H:i" }}</span>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- Additional Features -->
    <section class="features">
        <h2>Explore More Features</h2>
        <div class="cards">
            <div class="card">
                <img src="https://plus.unsplash.com/premium_photo-1723924839816-ffe7ce39719e?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8c3R1ZGVudHMlMjByZWFkaW5nfGVufDB8fDB8fHww" alt="Leaderboard">
                <h3>Leaderboard</h3>
                <p>See how you rank among other learners.</p>
                <a href="{% url 'leaderboard' %}">View Leaderboard</a>
            </div>
            <div class="card">
                <img src="https://media.istockphoto.com/id/1805651010/photo/children-visiting-the-library.webp?a=1&b=1&s=612x612&w=0&k=20&c=56uyvxRpsnHHevA60sx6s_3TbghDgOVJXYRyuEw-mTk=" alt="Analytics">
                <h3>Analytics</h3>
                <p>Track your progress with detailed analytics.</p>
                <a href="{% url 'progress-report' %}">View Analytics</a>
            </div>
            <div class="card">
                <img src="https://media.istockphoto.com/id/1805651010/photo/children-visiting-the-library.webp?a=1&b=1&s=612x612&w=0&k=20&c=56uyvxRpsnHHevA60sx6s_3TbghDgOVJXYRyuEw-mTk=" alt="Feedback">
                <h3>Feedback</h3>
                <p>Help us improve by sharing your feedback.</p>
                <!-- Optional feedback link -->
            </div>
        </div>
    </section>

</div>
{% endblock %}
