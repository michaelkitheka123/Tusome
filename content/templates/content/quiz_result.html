{% extends 'content/base.html' %}
{% load custom_filters %}

{% block title %}Quiz Results{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: auto;">
    <h2 style="margin-bottom: 1rem;">Quiz Results: <span style="color: #2c3e50;">{{ lesson.title }}</span></h2>
    <p style="font-size: 1.2rem; margin-bottom: 2rem;">
        <strong>Your Score:</strong> {{ score }} / {{ total_questions }}
    </p>

    <h3 style="margin-bottom: 1rem;">Quiz Breakdown</h3>
    <ol style="list-style-position: inside;">
        {% for quiz in quizzes %}
        <li style="margin-bottom: 1.5rem; padding: 1rem; background-color: #fff; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.08);">
            <p><strong>Question:</strong> {{ quiz.question }}</p>
            <p>
                <strong>Your Answer:</strong>
                {% with student_answer=request.session.student_answers|get_item:quiz.id %}
                    {% if student_answer %}
                        Option {{ student_answer }}
                    {% else %}
                        Not Answered
                    {% endif %}
                {% endwith %}
            </p>
            <p><strong>Correct Answer:</strong> Option {{ quiz.correct_option }}</p>
        </li>
        {% endfor %}
    </ol>

    <a href="{% url 'progress-report' %}"
       style="display: inline-block; margin-top: 2rem; padding: 0.6rem 1.2rem; background-color: #2c3e50; color: white; border-radius: 5px; text-decoration: none;">
        Back to Lessons
    </a>
</div>
{% endblock %}
