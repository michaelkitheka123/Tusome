{% extends 'content/base.html' %}

{% block title %}Progress Report{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: auto;">
    <h2 style="margin-bottom: 2rem;">üìä Progress Report</h2>

    <!-- Lesson Progress Table -->
    <h3 style="margin-bottom: 1rem;">Lesson Progress</h3>
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
            <thead>
                <tr style="background-color: #ecf0f1; text-align: left;">
                    <th style="padding: 12px;">Lesson</th>
                    <th style="padding: 12px;">Status</th>
                    <th style="padding: 12px;">Completed At</th>
                </tr>
            </thead>
            <tbody>
                {% for progress in lesson_progress %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding: 12px;">{{ progress.lesson.title }}</td>
                    <td style="padding: 12px;">
                        {% if progress.is_completed %}
                            <span style="color: green; font-weight: bold;">‚úÖ Completed</span>
                        {% else %}
                            <span style="color: #e67e22; font-weight: bold;">‚è≥ Not Completed</span>
                        {% endif %}
                    </td>
                    <td style="padding: 12px;">
                        {{ progress.completed_at|date:"M d, Y H:i" }}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding: 16px; text-align: center;">No lesson progress found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Quiz Results Table -->
    <h3 style="margin-top: 3rem; margin-bottom: 1rem;">Quiz Results</h3>
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
            <thead>
                <tr style="background-color: #ecf0f1; text-align: left;">
                    <th style="padding: 12px;">Lesson</th>
                    <th style="padding: 12px;">Score</th>
                    <th style="padding: 12px;">Date Taken</th>
                </tr>
            </thead>
            <tbody>
                {% for result in quiz_results %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding: 12px;">{{ result.quiz.lesson.title }}</td>
                    <td style="padding: 12px;">{{ result.score }} / {{ result.total_questions }}</td>
                    <td style="padding: 12px;">{{ result.created_at|date:"M d, Y H:i" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding: 16px; text-align: center;">No quiz results found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="{% url 'lesson-list' %}"
       style="display: inline-block; margin-top: 2rem; padding: 0.6rem 1.2rem; background-color: #2c3e50; color: white;
              border-radius: 5px; text-decoration: none;">
        ‚Üê Back to Lessons
    </a>

    <h3>Share Your Achievements</h3>
<p>Share your progress with your friends!</p>
<a href="https://twitter.com/intent/tweet?text=I%20just%20completed%20{{ total_lessons_completed }}%20lessons%20and%20scored%20{{ total_score }}%20points%20on%20%23MyLearningApp!&hashtags=Learning,Education" 
   target="_blank" class="btn btn-twitter">Share on Twitter</a>
<a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
   target="_blank" class="btn btn-facebook">Share on Facebook</a>
</div>
<style>
    .btn-twitter {
    background-color: #1DA1F2;
    color: white;
    padding: 10px 15px;
    text-decoration: none;
    margin-right: 10px;
    border-radius: 5px;
}

.btn-facebook {
    background-color: #4267B2;
    color: white;
    padding: 10px 15px;
    text-decoration: none;
    border-radius: 5px;
}
</style>
{% endblock %}
